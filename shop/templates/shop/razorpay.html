{% extends 'shop/basic.html' %}
{% block title%} Checkout - Ecommerce Website{% endblock %}
{% block body %}

<form action="http://127.0.0.1:8000/shop/checkout/payment/success/" method="POST">{% csrf_token %}
    {% for key, value in payment_params.items %}
    <input type='module' id="{{key}}" name='{{key}}' value="{{value}}" class="payment">
    {% endfor %}
    <!-- payment_params = {
        "amount" : int(str(amount)+'00'),
        "order_id": str(reference_order_id['id']),
        "name": order.name,
        "email": order.email, 
        "address":order.address
    }  -->

    <script
        src="https://checkout.razorpay.com/v1/checkout.js"
        data-key="rzp_test_dgzzcZxUBrkJSW" 
        
        
        document.getElementById('amount').innerHTML = data-amount;
        data-currency="INR"
        document.getElementById('order_id').innerHTML = data-order_id;
        
        
        data-buttontext="Pay with Razorpay"
        data-name="Acme Corp"
        data-description="A Wild Sheep Chase is the third novel by Japanese author Haruki Murakami"
        data-image="https://example.com/your_logo.jpg"
        data-prefill.name="Arpit Gupta"
        data-prefill.email="arpit.gupta@unthinkable.co"
        data-theme.color="#F37254"
    >
    console.log(document.getElementsByClassName('payment').id);
    console.log(data-order_id)
</script>
    <input type="hidden" custom="Hidden Element" name="hidden">
    
    </form>

{% endblock %}
<!-- 
    document.getElementById('amount').innerHTML = data-amount;
        
 -->endblock
 {%  block js %}
 <script>
    
    let razor = document.getElementsByClassName('razorpay-payment-button');
    razor.onclick=getpayment();
    razor.onclick=getorderid();
    function getpayment(){
        let payment = document.getElementsByClassName('payment').amount.value;
        console.log(payment);
        payment  = +payment;
        console.log(typeof(payment))
        
    }
    function getorderid(){
        let order_id = document.getElementsByClassName('payment').order_id.value;
        console.log(order_id)
        console.log(typeof(order_id))
    }
 </script>
 {% endblock %}


 
 <!-- document.getElementById('order_id').innerHTML = data-order_id; -->